$=jQuery.noConflict();var wpbs_conditional_logic={},wpbs_iti;function wpbs_lazy_load_script(src,callback){var s=document.createElement("script");s.src=src,s.async=!0,s.onreadystatechange=s.onload=function(){callback.done||s.readyState&&!/loaded|complete/.test(s.readyState)||(callback.done=!0,callback())},document.querySelector("head").appendChild(s)}$(document).ready((function($){var wpbs_frontend_visible_calendars=0,wpbs_frontend_visible_calendars_timeout;function resize_calendar($calendars_wrapper){var $months_wrapper=$calendars_wrapper.find(".wpbs-calendars-wrapper"),$months_wrapper_width=$calendars_wrapper.find(".wpbs-calendars"),calendar_min_width=$calendars_wrapper.data("min_width"),calendar_max_width=$calendars_wrapper.data("max_width"),$month_inner=$calendars_wrapper.find(".wpbs-calendar-wrapper");$months_wrapper.css("max-width","none"),$calendars_wrapper.data("min_width")>0&&$calendars_wrapper.find(".wpbs-calendar").css("min-width",calendar_min_width),$calendars_wrapper.data("max_width")>0&&$calendars_wrapper.find(".wpbs-calendar").css("max-width",calendar_max_width);var column_count=0;column_count=$months_wrapper_width.width()<2*(10+calendar_min_width)?1:$months_wrapper_width.width()<3*(10+calendar_min_width)?2:$months_wrapper_width.width()<4*(10+calendar_min_width)?3:$months_wrapper_width.width()<6*(10+calendar_min_width)?4:6,$calendars_wrapper.find(".wpbs-calendar").length<=column_count&&(column_count=$calendars_wrapper.find(".wpbs-calendar").length),$calendars_wrapper.attr("data-columns",column_count),$months_wrapper.hasClass("wpbs-legend-position-side")&&$months_wrapper.css("max-width",$calendars_wrapper.find(".wpbs-calendar").first().outerWidth(!0)*column_count);var td_width=$calendars_wrapper.find("td").first().width();$calendars_wrapper.find("td .wpbs-date-inner, td .wpbs-week-number").css("height",Math.ceil(td_width)+1+"px"),$calendars_wrapper.find("td .wpbs-date-inner, td .wpbs-week-number").css("line-height",Math.ceil(td_width)+1+"px"),$calendars_wrapper.find(".wpbs-yearly-calendar-row-header-inner")&&($calendars_wrapper.find(".wpbs-yearly-calendar-row-header-inner").css("height",Math.ceil(td_width)+1+"px"),$calendars_wrapper.find(".wpbs-yearly-calendar-row-header-inner").css("line-height",Math.ceil(td_width)+1+"px"));var th_height=$calendars_wrapper.find("th").css("height","auto").first().height();$calendars_wrapper.find("th").css("height",Math.ceil(th_height)+1+"px");var calendar_month_height=0;$month_inner.css("min-height","1px"),$month_inner.each((function(){$(this).height()>=calendar_month_height&&(calendar_month_height=$(this).height())})),$month_inner.css("min-height",Math.ceil(calendar_month_height)+"px"),$calendars_wrapper.css("visibility","visible")}function wpbs_pad(num,size){var s="00"+num;return s.substr(s.length-size)}function resize_calendar_overview($calendar_container){$calendar_container.find(".wpbs-overview-row .wpbs-overview-row-header").each((function(){$(this).parent().find(".wpbs-calendar-wrapper .wpbs-date").css("min-height",$(this).find(".wpbs-overview-row-header-inner").outerHeight(!0)).css("line-height",$(this).find(".wpbs-overview-row-header-inner").outerHeight(!0)+"px")}))}function refresh_calendar($calendar_container,current_year,current_month){var $calendar_container;if(($calendar_container=$calendar_container).hasClass("wpbs-is-loading"))return!1;var action="wpbs_refresh_calendar";$calendar_container.parent().hasClass("wpbs-main-wrapper-yearly")&&(action="wpbs_refresh_yearly_calendar");var data=$calendar_container.data();data.action=action,data.current_year=current_year,data.current_month=current_month,$calendar_container.find(".wpbs-calendar").append('<div class="wpbs-overlay"><div class="wpbs-overlay-spinner"><div class="wpbs-overlay-bounce1"></div><div class="wpbs-overlay-bounce2"></div><div class="wpbs-overlay-bounce3"></div></div></div>'),$calendar_container.addClass("wpbs-is-loading"),$calendar_container.find("select").attr("disabled",!0),$.post(wpbs_ajax.ajax_url,data,(function(response){$calendar_container.replaceWith(response),$(".wpbs-container").each((function(){resize_calendar($(this)),wpbs_mark_selected_dates($(this).parents(".wpbs-main-wrapper")),wpbs_set_off_screen_date_limits($(this).parents(".wpbs-main-wrapper")),wpbs_frontend_visible_calendars=$(".wpbs-container:visible").length,clearTimeout(wpbs_frontend_visible_calendars_timeout),wpbs_check_if_calendar_is_visible(),$(this).siblings("form").length||($(this).removeClass("wpbs-enable-hover"),$(this).parents(".wpbs-main-wrapper").hasClass("wpbs-main-wrapper-form-0")||$(this).addClass("wpbs-disable-selection"))}))}))}function refresh_calendar_overview($calendar_container,current_year,current_month){var $calendar_container;if(($calendar_container=$calendar_container).hasClass("wpbs-is-loading"))return!1;var data=$calendar_container.data();data.action="wpbs_refresh_calendar_overview",data.current_year=current_year,data.current_month=current_month,$calendar_container.find(".wpbs-overview-inner").append('<div class="wpbs-overlay"><div class="wpbs-overlay-spinner"><div class="wpbs-overlay-bounce1"></div><div class="wpbs-overlay-bounce2"></div><div class="wpbs-overlay-bounce3"></div></div></div>'),$calendar_container.addClass("wpbs-is-loading"),$calendar_container.find("select").attr("disabled",!0),$.post(wpbs_ajax.ajax_url,data,(function(response){$calendar_container.replaceWith(response),$(".wpbs-overview-container").each((function(){resize_calendar_overview($(this))}))}))}function wpbs_render_datepicker(){$(".wpbs-form-datepicker").each((function(){$datepicker=$(this);var date_format=$datepicker.data("format")?$datepicker.data("format"):"dd-mm-yy";$datepicker.datepicker({dateFormat:date_format,changeMonth:!0,changeYear:!0,showOtherMonths:!0,selectOtherMonths:!0,firstDay:1,yearRange:"c-100:c+100",beforeShow:function(){jQuery("#ui-datepicker-div").addClass("wpbs-datepicker")},onClose:function(value,object){jQuery("#ui-datepicker-div").hide().removeClass("wpbs-datepicker")}})}))}function wpbs_render_recaptcha(){$(".wpbs-google-recaptcha-v2").length&&$(".wpbs-google-recaptcha-v2").each((function(){if($recaptcha=$(this),$recaptcha.find("iframe").length)return!0;grecaptcha.render($recaptcha.attr("id"),{sitekey:$recaptcha.data("sitekey")})})),$(".wpbs-google-recaptcha-v3").length&&$(".wpbs-google-recaptcha-v3").each((function(){$recaptcha=$(this),grecaptcha.execute($recaptcha.data("sitekey"),{action:"wpbs_form"}).then((function(token){var recaptchaResponse;$recaptcha.get(0).value=token}))}))}$(document).on("wpbs_refresh_calendars",(function(){$(".wpbs-container").each((function(){refresh_calendar($(this),$(this).data("current_year"),$(this).data("current_month"))}))})),$(".wpbs-overview-container").each((function(){$calendar=$(this),now=new Date,today=now.getDate(),$calendar.find(".wpbs-overview-inner").scrollLeft(27*(today-1))})),$(".wpbs-container").each((function(){resize_calendar($(this))})),$(window).on("resize",(function(){var iframe;($(".wpbs-container").each((function(){resize_calendar($(this))})),$(".edit-site-visual-editor__editor-canvas").length)&&$("iframe.edit-site-visual-editor__editor-canvas").contents().find(".wpbs-container").each((function(){resize_calendar($(this))}))})),$(document).on("click",".wpbs-container .wpbs-prev",(function(e){e.preventDefault();var $container=$(this).closest(".wpbs-container"),current_month=$container.data("current_month"),current_year=$container.data("current_year");if($(this).parents(".wpbs-main-wrapper").hasClass("wpbs-main-wrapper-yearly"))refresh_calendar($container,current_year-=1,current_month);else{var navigate_count=1;void 0!==$container.data("jump_months")&&"1"==$container.data("jump_months")&&(navigate_count=parseInt($container.data("months_to_show")));for(var i=1;i<=navigate_count;i++)(current_month-=1)<1&&(current_month=12,current_year-=1);refresh_calendar($container,current_year,current_month)}})),$(document).on("click",".wpbs-container .wpbs-next",(function(e){e.preventDefault();var $container=$(this).closest(".wpbs-container"),current_month=$container.data("current_month"),current_year=$container.data("current_year");if($(this).parents(".wpbs-main-wrapper").hasClass("wpbs-main-wrapper-yearly"))refresh_calendar($container,current_year+=1,current_month);else{var navigate_count=1;void 0!==$container.data("jump_months")&&"1"==$container.data("jump_months")&&(navigate_count=parseInt($container.data("months_to_show")));for(var i=1;i<=navigate_count;i++)(current_month+=1)>12&&(current_month=1,current_year+=1);refresh_calendar($container,current_year,current_month)}})),$(document).on("change",".wpbs-container .wpbs-select-container select",(function(){var $container=$(this).closest(".wpbs-container"),date=new Date(1e3*$(this).val()),year,month;refresh_calendar($container,date.getFullYear(),date.getMonth()+1)})),$(".wpbs-select-container select").prop("selectedIndex",(function(){var selected=$(this).children("[selected]").index();return-1!=selected?selected:0})),$(document).on("change",".wpbs-overview-container .wpbs-select-container select",(function(){var $container=$(this).closest(".wpbs-overview-container"),date=new Date(1e3*$(this).val()),year,month;refresh_calendar_overview($container,date.getFullYear(),date.getMonth()+1)})),$(document).on("mouseenter touchstart",".wpbs-container .wpbs-date, .wpbs-overview-container .wpbs-date",(function(e){var $date=$(this);if($date.parents(".wpbs-date-selection-in-progress").length&&"touchstart"!=e.type)return!1;if($date.find(".wpbs-tooltip").length=0)return!1;var $tooltip=$date.find(".wpbs-tooltip"),offset_left,overflow_left,overflow_right=$(window).width()-($date.offset().left+$tooltip.outerWidth(!0));offset_left=overflow_right<0?(overflow_left=0-($tooltip.outerWidth(!0)-$date.offset().left))<0&&overflow_right>overflow_left?$date.offset().left:$date.offset().left-$tooltip.outerWidth(!0)+$date.outerWidth(!0):$date.offset().left,$tooltip.css("left",offset_left),$tooltip.css("top",$date.offset().top-$tooltip.outerHeight()-$(window).scrollTop()-2),$date.addClass("wpbs-tooltip-active")})),$(document).on("mouseleave",".wpbs-container .wpbs-date, .wpbs-overview-container .wpbs-date",(function(){var $date=$(this);if($date.find(".wpbs-tooltip").length=0)return!1;$date.removeClass("wpbs-tooltip-active")})),$(window).scroll((function(){$(".wpbs-date").removeClass("wpbs-tooltip-active")})),$(".wpbs-overview-container").each((function(){resize_calendar_overview($(this))})),$(window).on("resize",(function(){$(".wpbs-overview-container").each((function(){resize_calendar_overview($(this))}))})),$(".wpbs-form-fields .wpbs-has-conditional-logic").length?$(document).on("change",".wpbs-form-field input, .wpbs-form-field select",(function(){wpbs_calculate_price($(this).parents(".wpbs-main-wrapper"))})):$(document).on("change keyup",".wpbs-form-field-product_radio input, .wpbs-form-field-product_checkbox input, .wpbs-form-field-product_number input, .wpbs-form-field-product_dropdown select, .wpbs-form-field-radio input, .wpbs-form-field-checkbox input, .wpbs-form-field-dropdown select, .wpbs-form-field-payment_method input, .wpbs-form-field-inventory select, .wpbs-form-field-number input",(function(){wpbs_calculate_price($(this).parents(".wpbs-main-wrapper"))})),$(document).on("wpbs_calculate_price",(function(){$(".wpbs-main-wrapper").each((function(){wpbs_calculate_price($(this))}))})),$(document).on("change",".wpbs-form-field-payment_method input[type='radio']",(function(){$(this).parents(".wpbs-form-field-payment_method").find("p.wpbs-payment-method-description-open").removeClass("wpbs-payment-method-description-open"),$(this).parent().next("p").addClass("wpbs-payment-method-description-open")})),$("body").on("keydown",".wpbs-form-field-phone input",(function(e){var key=e.key;return"1"==key||"2"==key||"3"==key||"4"==key||"5"==key||"6"==key||"7"==key||"8"==key||"9"==key||"0"==key||"("==key||")"==key||"+"==key||"-"==key||"Delete"==key||"Backspace"==key||"Enter"==key||"ArrowLeft"==key||"ArrowRight"==key||"Home"==key||"End"==key||"Tab"==key||"Insert"==key})),$(document).on("submit",".wpbs-form-container",(function(e){e.preventDefault(),$form=$(this),$form.find(".wpbs-form-field-phone input").each((function(){$phone_input=$(this),(wpbs_iti=wpbs_intl_tel_input_get_instance($phone_input))&&$phone_input.val(wpbs_iti.getNumber())}));var $calendar_wrapper=$form.parents(".wpbs-main-wrapper"),$calendar=$calendar_wrapper.find(".wpbs-container");$form.append('<div class="wpbs-overlay"><div class="wpbs-overlay-spinner"><div class="wpbs-overlay-bounce1"></div><div class="wpbs-overlay-bounce2"></div><div class="wpbs-overlay-bounce3"></div></div></div>'),$form.addClass("wpbs-is-loading"),$form.find(".wpbs-form-submit-button button").attr("disabled",!0);var data={action:"wpbs_submit_form"};data.form=$form.data(),data.calendar=$calendar.data(),data.wpbs_token=wpbs_ajax.token,data.form_data=$form.serialize(),delete data.form.plugin_liquidFormInputs,delete data.form.uiFormResetInstances,$.post(wpbs_ajax.ajax_url,data,(function(response){if(!1===(response=JSON.parse(response)).success)$(window).scrollTop()>$form.offset().top&&0!=wpbs_ajax.scroll_animation_offset&&$("html, body").stop().animate({scrollTop:$form.offset().top-wpbs_ajax.scroll_animation_offset}),form_id=$form.data().id,calendar_id=$calendar.data().id,$form.replaceWith(response.html),wpbs_render_recaptcha(),wpbs_render_datepicker(),wpbs_calculate_price($calendar_wrapper),wpbs_display_selected_dates($calendar_wrapper),$(document).trigger("wpbs_form_updated",[$calendar_wrapper,form_id,calendar_id]),$calendar_wrapper.find(".wpbs-form-general-error").length?$(document).trigger("wpbs_form_validation_failed",[$calendar_wrapper]):$(document).trigger("wpbs_form_payment_screen_displayed",[$calendar_wrapper]),$calendar_wrapper.find(".wpbs-payment-confirmation").length&&$calendar_wrapper.find(".wpbs-form-general-error").length&&($calendar_wrapper.find(".wpbs-form-container").insertBefore(".wpbs-payment-confirmation"),$calendar_wrapper.find(".wpbs-payment-confirmation").remove(),$calendar_wrapper.find(".wpbs-calendar .wpbs-overlay").remove(),$calendar_wrapper.find(".wpbs-form-fields").remove(),$calendar_wrapper.find(".wpbs-form-submit-button").remove()),$calendar_wrapper.find(".wpbs-coupon-code input").val()&&$calendar_wrapper.find(".wpbs-coupon-code-add").trigger("click");else if(!0===response.success)if($(document).trigger("wpbs_form_submitted",[$calendar_wrapper]),response.tracking_script&&$("<script>"+response.tracking_script+"<\/script>").insertAfter($form),"redirect"==response.confirmation_type)window.location.href=response.confirmation_redirect_url;else{var confirmation_message=void 0!==response.confirmation_message?response.confirmation_message:"<p>The form was successfully submitted.</p>";$form.parents(".wpbs-payment-confirmation").length?$form.parents(".wpbs-payment-confirmation").replaceWith('<div class="wpbs-form-confirmation-message">'+confirmation_message+"</div>"):($form.replaceWith('<div class="wpbs-form-confirmation-message">'+confirmation_message+"</div>"),0!=wpbs_ajax.scroll_animation_offset&&$("html, body").stop().animate({scrollTop:$calendar_wrapper.offset().top-wpbs_ajax.scroll_animation_offset})),wpbs_remove_selection_dates($calendar_wrapper),$calendar_wrapper.data("future_date_limit","infinite"),$calendar_wrapper.data("past_date_limit","infinite");var current_month=$calendar.data("current_month"),current_year=$calendar.data("current_year");refresh_calendar($calendar,current_year,current_month)}}))})),$(window).on("load",(function(){wpbs_render_recaptcha(),wpbs_render_datepicker()})),$(document).on("wpbs_add_booking_modal_opened",(function(){wpbs_render_datepicker()})),wpbs_render_datepicker();var wpbs_date_selection_state=-1,wpbs_calculate_price_xhr;function wpbs_set_selection_start_date(date,$calendar_instance){$calendar_instance.addClass("wpbs-date-selection-in-progress"),$calendar_instance.removeClass("wpbs-dates-selected"),$calendar_instance.find(".wpbs-container").data("start_date",date.getTime())}function wpbs_set_selection_end_date(date,$calendar_instance){$calendar_instance.removeClass("wpbs-date-selection-in-progress"),start_date=wpbs_get_selection_start_date($calendar_instance),start_date.getTime()>date?(wpbs_set_selection_start_date(date,$calendar_instance),start_date.setUTCDate(start_date.getUTCDate()),$calendar_instance.find(".wpbs-container").data("end_date",start_date.getTime())):$calendar_instance.find(".wpbs-container").data("end_date",date.getTime())}function wpbs_get_selection_start_date($calendar_instance){return void 0!==$calendar_instance.find(".wpbs-container").data("start_date")&&""!=$calendar_instance.find(".wpbs-container").data("start_date")&&(date=new Date($calendar_instance.find(".wpbs-container").data("start_date")),date)}function wpbs_get_selection_end_date($calendar_instance){return void 0!==$calendar_instance.find(".wpbs-container").data("end_date")&&""!=$calendar_instance.find(".wpbs-container").data("end_date")&&(date=new Date($calendar_instance.find(".wpbs-container").data("end_date")),date)}function wpbs_remove_selection_dates($calendar_instance){$calendar_instance.find(".wpbs-container").data("start_date",0),$calendar_instance.find(".wpbs-container").data("end_date",0),$calendar_instance.find(".wpbs-container .wpbs-date").removeClass("wpbs-date-selected"),$calendar_instance.find(".wpbs-container .wpbs-date").removeClass("wpbs-date-hover"),$calendar_instance.find(".wpbs-container .wpbs-date").removeClass("wpbs-selected-first").removeClass("wpbs-selected-last"),$calendar_instance.find(".wpbs-container .wpbs-date .wpbs-legend-icon-select").remove(),$calendar_instance.data("future_date_limit","infinite"),$calendar_instance.data("past_date_limit","infinite"),wpbs_clear_price($calendar_instance)}function wpbs_mark_hover_selection(date,$calendar_instance){if($el=$calendar_instance.find('.wpbs-container .wpbs-date[data-day="'+date.getUTCDate()+'"][data-month="'+(date.getUTCMonth()+1)+'"][data-year="'+date.getUTCFullYear()+'"]'),$el.length&&!$el.hasClass("wpbs-is-bookable"))return!1;if(changeover_start=$calendar_instance.find(".wpbs-container").data("changeover_start"),changeover_end=$calendar_instance.find(".wpbs-container").data("changeover_end"),changeover_start&&changeover_end){var hovered_dates={};if($calendar_instance.find(".wpbs-date-hover").each((function(){hovered_date_legend="normal",$(this).hasClass("wpbs-legend-item-"+changeover_start)&&(hovered_date_legend="start"),$(this).hasClass("wpbs-legend-item-"+changeover_end)&&(hovered_date_legend="end"),hovered_dates[""+$(this).data("year")+wpbs_pad($(this).data("month"),2)+wpbs_pad($(this).data("day"),2)]=hovered_date_legend})),hovered_date_legend="normal",$el.hasClass("wpbs-legend-item-"+changeover_start)&&(hovered_date_legend="start"),$el.hasClass("wpbs-legend-item-"+changeover_end)&&(hovered_date_legend="end"),hovered_dates[""+$el.data("year")+wpbs_pad($el.data("month"),2)+wpbs_pad($el.data("day"),2)]=hovered_date_legend,start_date_found=!1,exit_selection=!1,$.each(hovered_dates,(function(date,hovered_date_legend){"start"==hovered_date_legend&&(start_date_found=!0),"end"!=hovered_date_legend||!0!==start_date_found||(exit_selection=!0)})),!0===exit_selection)return!1}return!("infinite"!=$calendar_instance.data("past_date_limit")&&date.getTime()<$calendar_instance.data("past_date_limit"))&&(!("infinite"!=$calendar_instance.data("future_date_limit")&&date.getTime()>$calendar_instance.data("future_date_limit"))&&($el.addClass("wpbs-date-hover"),!0))}function wpbs_mark_selection(date,$calendar_instance){$el=$calendar_instance.find('.wpbs-container .wpbs-date[data-day="'+date.getUTCDate()+'"][data-month="'+(date.getUTCMonth()+1)+'"][data-year="'+date.getUTCFullYear()+'"]'),$el.addClass("wpbs-date-selected")}function wpbs_mark_selection_split_start(date,$calendar_instance){$el=$calendar_instance.find('.wpbs-container .wpbs-date[data-day="'+date.getUTCDate()+'"][data-month="'+(date.getUTCMonth()+1)+'"][data-year="'+date.getUTCFullYear()+'"]'),$el.addClass("wpbs-selected-first").find(".wpbs-legend-item-icon").append('<div class="wpbs-legend-icon-select"><svg height="100%" width="100%" viewBox="0 0 200 200" preserveAspectRatio="none"><polygon points="0,200 200,200 200,0" /></svg></div>')}function wpbs_mark_selection_split_end(date,$calendar_instance){$el=$calendar_instance.find('.wpbs-container .wpbs-date[data-day="'+date.getUTCDate()+'"][data-month="'+(date.getUTCMonth()+1)+'"][data-year="'+date.getUTCFullYear()+'"]'),$el.addClass("wpbs-selected-last").find(".wpbs-legend-item-icon").append('<div class="wpbs-legend-icon-select"><svg height="100%" width="100%" viewBox="0 0 200 200" preserveAspectRatio="none"><polygon points="0,0 0,200 200,0" /></svg></div>')}function wpbs_mark_selected_dates($calendar_instance){if(!1!==wpbs_get_selection_start_date($calendar_instance)&&!1!==wpbs_get_selection_end_date($calendar_instance)){$calendar_instance.find(".wpbs-date").removeClass("wpbs-date-selected"),$calendar_instance.find(".wpbs-date").removeClass("wpbs-date-hover");for(var i=wpbs_get_selection_start_date($calendar_instance);i<=wpbs_get_selection_end_date($calendar_instance);i.setUTCDate(i.getUTCDate()+1))wpbs_mark_selection(i,$calendar_instance);$calendar_instance.find('.wpbs-form-container[data-selection_style="split"]').length&&(wpbs_mark_selection_split_start(wpbs_get_selection_start_date($calendar_instance),$calendar_instance),wpbs_mark_selection_split_end(wpbs_get_selection_end_date($calendar_instance),$calendar_instance)),$calendar_instance.addClass("wpbs-dates-selected"),wpbs_calculate_price($calendar_instance),wpbs_display_selected_dates($calendar_instance),$(document).trigger("wpbs_dates_selected",[$calendar_instance])}}function wpbs_set_off_screen_date_limits($calendar_instance){if(!1===wpbs_get_selection_start_date($calendar_instance))return!1;if("infinite"!=$calendar_instance.data("future_date_limit")&&"infinite"!=$calendar_instance.data("past_date_limit"))return!1;var future_dates=[],past_dates=[],selected_date=wpbs_get_selection_start_date($calendar_instance).getTime();$calendar_instance.find(".wpbs-date").not(".wpbs-is-bookable").not(".wpbs-gap").each((function(){date=wpbs_get_element_date($(this)).getTime(),date>selected_date?future_dates.push(date):past_dates.push(date)})),future_dates.length&&"infinite"==$calendar_instance.data("future_date_limit")&&(future_dates.sort(),$calendar_instance.data("future_date_limit",future_dates[0])),past_dates.length&&"infinite"==$calendar_instance.data("past_date_limit")&&(past_dates.sort().reverse(),$calendar_instance.data("past_date_limit",past_dates[0]))}function wpbs_get_element_date($el){return date=new Date(Date.UTC($el.data("year"),$el.data("month")-1,$el.data("day"),0,0,0)),date}function wpbs_calculate_price($calendar_instance){if($calendar_instance.find(".wpbs-form-field-total").length)if($calendar_instance.find(".wpbs-container").data("start_date")&&$calendar_instance.find(".wpbs-container").data("end_date")){"object"==typeof wpbs_calculate_price_xhr&&wpbs_calculate_price_xhr.abort(),$calendar_instance.find(".wpbs-form-field-total").append('<div class="wpbs-overlay"><div class="wpbs-overlay-spinner"><div class="wpbs-overlay-bounce1"></div><div class="wpbs-overlay-bounce2"></div><div class="wpbs-overlay-bounce3"></div></div></div>'),$calendar_instance.find(".wpbs-form-field-total").addClass("wpbs-is-loading"),$form=$calendar_instance.find("form"),$calendar=$calendar_instance.find(".wpbs-container"),wpbs_apply_conditional_logic($calendar_instance);var data={action:"wpbs_calculate_pricing"};data.form=$form.data(),data.calendar=$calendar.data(),data.post_data=$form.serialize(),delete data.form.plugin_liquidFormInputs,delete data.form.uiFormResetInstances,wpbs_calculate_price_xhr=$.post(wpbs_ajax.ajax_url,data,(function(response){$calendar_instance.find(".wpbs-form-field-total .wpbs-overlay").remove(),$calendar_instance.find(".wpbs-form-field-total").removeClass("wpbs-is-loading"),$calendar_instance.find(".wpbs-form-field-total .wpbs-total-price").html(response),$calendar_instance.find(".wpbs-pricing-table").hasClass("wpbs-part-payment-applicable")?$(".wpbs-form-field-part-payment-applicability").show():$(".wpbs-form-field-part-payment-applicability").hide(),$(document).trigger("wpbs_pricing_table_updated",[{instance:$calendar_instance}])}))}else wpbs_clear_price($calendar_instance)}function wpbs_clear_price($calendar_instance){$calendar_instance.find(".wpbs-form-field-total").length&&($calendar_instance.find(".wpbs-form-field-total input").val(""),$calendar_instance.find(".wpbs-form-field-total .wpbs-total-price").html($calendar_instance.find(".wpbs-total-price").data("string-select-dates")))}function wpbs_display_selected_dates($calendar_instance){if(!$calendar_instance.find(".wpbs-form-selected-dates").length)return!1;"single"==$calendar_instance.find(".wpbs-form-container").data("selection_type")&&$calendar_instance.find(".wpbs-form-selected-dates .wpbs-form-field-end-date").parent().hide(),moment.locale($calendar_instance.find(".wpbs-container").data("language")),nice_start_date=nice_end_date="-",wpbs_get_selection_start_date($calendar_instance)&&(start_date=wpbs_get_selection_start_date($calendar_instance),nice_start_date=moment.utc(start_date).format(wpbs_ajax.time_format)),wpbs_get_selection_end_date($calendar_instance)&&(end_date=wpbs_get_selection_end_date($calendar_instance),nice_end_date=moment.utc(end_date).format(wpbs_ajax.time_format)),$calendar_instance.find(".wpbs-form-selected-dates .wpbs-form-field-start-date .wpbs-form-field-input").html(nice_start_date),$calendar_instance.find(".wpbs-form-selected-dates .wpbs-form-field-end-date .wpbs-form-field-input").html(nice_end_date)}function wpbs_validate_date_selection($calendar_instance){var $form=$calendar_instance.find(".wpbs-form-container"),$calendar=$calendar_instance.find(".wpbs-container");$form.find(".wpbs-form-general-error").remove(),$form.removeClass("wpbs-form-is-valid");var data={action:"wpbs_validate_date_selection"};data.form=$form.data(),data.calendar=$calendar.data(),data.wpbs_token=wpbs_ajax.token,data.form_data=$form.serialize(),$.post(wpbs_ajax.ajax_url,data,(function(response){!1===(response=JSON.parse(response)).success?($form.replaceWith(response.html),wpbs_render_recaptcha(),wpbs_render_datepicker(),wpbs_display_selected_dates($calendar_instance),$(document).trigger("wpbs_form_updated",[$calendar_instance,data.form.id,data.calendar.id]),$calendar_instance.find(".wpbs-coupon-code input").val()&&$calendar_instance.find(".wpbs-coupon-code-add").trigger("click")):$form.addClass("wpbs-form-is-valid"),wpbs_apply_conditional_logic($calendar_instance)}))}function wpbs_is_touch_device(){var prefixes=" -webkit- -moz- -o- -ms- ".split(" "),mq=function(query){return window.matchMedia(query).matches},query;return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||mq(["(",prefixes.join("touch-enabled),("),"heartz",")"].join(""))}function wpbs_initialize_intl_tel_input($container){return!!wpbs_ajax.wpbs_iti&&(!!$container.find(".wpbs-form-field-phone input").length&&void $container.find(".wpbs-form-field-phone input").each((function(){var $phone_input=$(this);if($phone_input.parent().hasClass("iti"))return!0;params=wpbs_iti_get_params(),iti=window.intlTelInput($phone_input.get(0),params),iti.setNumber($phone_input.val()),$phone_input.val()&&(setTimeout((function(){$phone_input.trigger("blur")}),1),setTimeout((function(){$phone_input.trigger("blur")}),100),setTimeout((function(){$phone_input.trigger("blur")}),200),setTimeout((function(){$phone_input.trigger("blur")}),500))})))}function wpbs_iti_get_params(){var params={nationalMode:!1,separateDialCode:!0,utilsScript:wpbs_ajax.plugins_dir+"assets/libs/intl-tel-input/js/utils.js"};if(wpbs_ajax.wpbs_iti_country_lookup){var user_country=localStorage.getItem("wpbs_user_country");user_country?params.initialCountry=user_country:(params.initialCountry="auto",params.geoIpLookup=function(callback){$.get("https://ipinfo.io?token="+wpbs_ajax.wpbs_iti_country_lookup,(function(){}),"jsonp").always((function(resp){var countryCode=resp&&resp.country?resp.country:wpbs_ajax.wpbs_iti_default_country;localStorage.setItem("wpbs_user_country",countryCode),callback(countryCode)}))})}else params.initialCountry=wpbs_ajax.wpbs_iti_default_country;return Object.assign(params,wpbs_ajax.wpbs_iti_params),params}function wpbs_intl_tel_input_get_instance($element){return void 0!==$element&&(void 0!==window.intlTelInputGlobals&&window.intlTelInputGlobals.instances[$element.data("intl-tel-input-id")])}function wpbs_check_if_calendar_is_visible(){return!!$(".wpbs-container").length&&($(".wpbs-container:visible").addClass("wpbs-visible"),wpbs_frontend_visible_calendars!=$(".wpbs-container.wpbs-visible").length&&($(window).trigger("resize"),wpbs_frontend_visible_calendars=$(".wpbs-container.wpbs-visible").length),$(".wpbs-container:not(:visible)").removeClass("wpbs-visible"),$(".wpbs-container.wpbs-visible").length!=$(".wpbs-container").length&&void(wpbs_frontend_visible_calendars_timeout=setTimeout(wpbs_check_if_calendar_is_visible,250)))}function wpbs_apply_conditional_logic($calendar_instance){var $form=$calendar_instance.find("form"),form_id=$form.data("id");if(void 0===wpbs_conditional_logic[form_id])return!1;form_rules=wpbs_conditional_logic[form_id],$.each(form_rules,(function(field_id,field_data){total_rules=field_data.rules.length,valid_rules=0,valid=!1,$field=$calendar_instance.find(".wpbs-form-field-"+form_id+"-"+field_id),$.each(field_data.rules,(function(rule_id,rule){!0===wpbs_evaluate_rule(wpbs_get_comparison_value($form,rule.field),wpbs_get_rule_value(rule),rule.condition)&&valid_rules++})),("all"==field_data.logic&&valid_rules==total_rules||"any"==field_data.logic&&valid_rules>0)&&(valid=!0),!0===valid?"show"==field_data.action?($field.show(),$field.find("input").each((function(){$(this).data("value")&&$(this).val($(this).data("value"))}))):($field.hide(),$field.find("input").val(""),$field.find("input").prop("checked",!1),$field.find("select").val("")):"show"==field_data.action?($field.hide(),$field.find("input").val(""),$field.find("input").prop("checked",!1),$field.find("select").val("")):($field.show(),$field.find("input").each((function(){$(this).data("value")&&$(this).val($(this).data("value"))})))}))}function wpbs_get_comparison_value($form,field_id){if("stay_length"==field_id)return days_selected=($form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("end_date")-$form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("start_date"))/1e3/86400+("split"==$form.data("selection_style")?0:1),String(days_selected);if("days_from_today"==field_id)return days_from_today=$form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("start_date")-$form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("current_date"),String(days_from_today/1e3/60/60/24);if("calendar_id"==field_id)return calendar_id=$form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("id"),String(calendar_id);if("start_date"==field_id)return String($form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("start_date"));if("end_date"==field_id)return String($form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("end_date"));if("start_weekday"==field_id){var start_weekday=new Date($form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("start_date"));return start_weekday?String(0===start_weekday.getDay()?7:start_weekday.getDay()):"0"}if("end_weekday"==field_id){var end_weekday=new Date($form.parents(".wpbs-main-wrapper").find(".wpbs-container").data("end_date"));return end_weekday?String(0===end_weekday.getDay()?7:end_weekday.getDay()):"0"}return wpbs_get_field_value_by_id($form,field_id)}function wpbs_get_rule_value(rule){return"start_weekday"==rule.field||"end_weekday"==rule.field?rule.select_value:"start_date"==rule.field||"end_date"==rule.field?(date=new Date(rule.value),date?String(date.getTime()):String(0)):rule.value}function wpbs_get_field_value_by_id($form,field_id){var form_id=$form.data("id");$el=$form.find(".wpbs-form-field-"+form_id+"-"+field_id);var value="";return $el.find("input").length&&($el.find('input[type="checkbox"]').length||$el.find('input[type="radio"]').length?($el.find("input:checked").each((function(){option_value=$(this).val().trim(),-1!==option_value.indexOf("|")&&(option_value=option_value.split("|")[1].trim()),value+=option_value+","})),value=value.replace(/(^,)|(,$)/g,"")):value=$el.find("input").val().trim()),$el.find("select").length&&(value=$el.find("select").val()?$el.find("select").val().trim():""),-1!==value.indexOf("|")&&(value=value.split("|")[1].trim()),value}function wpbs_evaluate_rule(a,b,operation){switch(a=a?a.toLowerCase():"",b=b?b.toLowerCase():"",operation){case"is":return a==b;case"isnot":return a!=b;case"greater":return a=parseFloat(a),b=parseFloat(b),!(!wpbs_is_number(a)||!wpbs_is_number(b))&&a>b;case"lower":return a=parseFloat(a),b=parseFloat(b),!(!wpbs_is_number(a)||!wpbs_is_number(b))&&a<b;case"contains":return a.indexOf(b)>0;case"not_contains":return-1===a.indexOf(b);case"starts":return 0==a.indexOf(b);case"ends":var start=a.length-b.length,tail;return!(start<0)&&b==a.substring(start)}return!1}function wpbs_is_number(n){return!isNaN(parseFloat(n))&&isFinite(n)}$(".wpbs-main-wrapper").each((function(){wpbs_mark_selected_dates($(this)),wpbs_set_off_screen_date_limits($(this))})),-1!==location.href.indexOf("wpbs-selection-start")&&$(".wpbs-main-wrapper").each((function(){wpbs_validate_date_selection($(this))})),$(document).keyup((function(e){27===e.keyCode&&(1!==wpbs_date_selection_state&&3!==wpbs_date_selection_state||(wpbs_remove_selection_dates($calendar_instance),$(document).trigger("wpbs_dates_deselected",[$calendar_instance]),$calendar_instance.data("future_date_limit","infinite"),$calendar_instance.data("past_date_limit","infinite"),$calendar_instance.find(".wpbs-container").addClass("wpbs-enable-hover"),wpbs_date_selection_state=-1))})),$(document).on("click",".wpbs-date",(function(e){wpbs_is_touch_device()&&$(this).trigger("mouseenter"),$(this).hasClass("wpbs-date-hover")||1!==wpbs_date_selection_state&&3!==wpbs_date_selection_state||(wpbs_remove_selection_dates($calendar_instance),$(document).trigger("wpbs_dates_deselected",[$calendar_instance]),$calendar_instance.data("future_date_limit","infinite"),$calendar_instance.data("past_date_limit","infinite"),$calendar_instance.find(".wpbs-container").addClass("wpbs-enable-hover"),wpbs_date_selection_state=-1)})),$(document).on("click",".wpbs-container .wpbs-is-bookable",(function(){if($el=$(this),$calendar_instance=$el.parents(".wpbs-main-wrapper"),$el.hasClass("wpbs-gap"))return!1;if($calendar_instance.hasClass("wpbs-main-wrapper-form-0"))return!1;if($calendar_instance.find('.wpbs-form-container[data-selection_type="multiple"]').length)if(!1===wpbs_get_selection_start_date($calendar_instance))wpbs_date_selection_state=1,$calendar_instance.data("future_date_limit","infinite"),$calendar_instance.data("past_date_limit","infinite"),wpbs_set_selection_start_date(wpbs_get_element_date($el),$calendar_instance),wpbs_set_off_screen_date_limits($calendar_instance),wpbs_display_selected_dates($calendar_instance),wpbs_is_touch_device()||$el.trigger("mouseenter");else if(!1!==wpbs_get_selection_start_date($calendar_instance)&&!1===wpbs_get_selection_end_date($calendar_instance)){if(wpbs_date_selection_state=2,wpbs_is_touch_device()&&$el.trigger("mouseenter"),!$el.hasClass("wpbs-date-hover"))return!1;wpbs_set_selection_end_date(wpbs_get_element_date($el),$calendar_instance),wpbs_mark_selected_dates($calendar_instance),$form=$calendar_instance.find(".wpbs-form-container"),$(window).width()<767&&0!=wpbs_ajax.scroll_animation_offset&&setTimeout((function(){$("html, body").stop().animate({scrollTop:$form.offset().top-wpbs_ajax.scroll_animation_offset},700)}),300),$calendar_instance.find(".wpbs-container").addClass("wpbs-enable-hover"),wpbs_validate_date_selection($calendar_instance)}else!1!==wpbs_get_selection_start_date($calendar_instance)&&!1!==wpbs_get_selection_end_date($calendar_instance)&&(wpbs_date_selection_state=3,wpbs_remove_selection_dates($calendar_instance),$(document).trigger("wpbs_dates_deselected",[$calendar_instance]),$calendar_instance.data("future_date_limit","infinite"),$calendar_instance.data("past_date_limit","infinite"),wpbs_set_selection_start_date(wpbs_get_element_date($el),$calendar_instance),wpbs_set_off_screen_date_limits($calendar_instance),wpbs_display_selected_dates($calendar_instance),wpbs_is_touch_device()||$el.trigger("mouseenter"));$calendar_instance.find('.wpbs-form-container[data-selection_type="single"]').length&&(wpbs_remove_selection_dates($calendar_instance),wpbs_set_selection_start_date(wpbs_get_element_date($el),$calendar_instance),wpbs_set_selection_end_date(wpbs_get_element_date($el),$calendar_instance),$el.addClass("wpbs-date-selected"),$calendar_instance.find(".wpbs-form-field-inventory-dropdown option").remove(),wpbs_mark_selected_dates($calendar_instance),wpbs_display_selected_dates($calendar_instance),wpbs_validate_date_selection($calendar_instance))})),$(document).on("mouseenter",".wpbs-container .wpbs-is-bookable",(function(){if($el=$(this),$calendar_instance=$el.parents(".wpbs-main-wrapper"),$calendar_instance.hasClass("wpbs-main-wrapper-form-0"))return!1;if(!1===wpbs_get_selection_start_date($calendar_instance)||!1!==wpbs_get_selection_end_date($calendar_instance))return!1;if($calendar_instance.find(".wpbs-container").removeClass("wpbs-enable-hover"),current_date=wpbs_get_element_date($el),selection_start_date=wpbs_get_selection_start_date($calendar_instance),$calendar_instance.find(".wpbs-container .wpbs-date").removeClass("wpbs-date-hover"),current_date>selection_start_date){start_date=selection_start_date,end_date=current_date;for(var i=start_date;i<=end_date&&!1!==wpbs_mark_hover_selection(i,$calendar_instance);i.setUTCDate(i.getUTCDate()+1));}else{start_date=current_date,end_date=selection_start_date;for(var i=end_date;i>=start_date&&!1!==wpbs_mark_hover_selection(i,$calendar_instance);i.setUTCDate(i.getUTCDate()-1));}$calendar_instance.find('.wpbs-form-container[data-selection_style="split"]').length&&($calendar_instance.find(".wpbs-date").removeClass("wpbs-selected-first").removeClass("wpbs-selected-last"),$calendar_instance.find(".wpbs-date .wpbs-legend-icon-select").remove(),selection_start_date=wpbs_get_selection_start_date($calendar_instance),current_date=wpbs_get_element_date($el),current_date>selection_start_date?(start_date=selection_start_date,end_date=current_date):(start_date=current_date,end_date=selection_start_date),$calendar_instance.find('.wpbs-container .wpbs-date[data-day="'+start_date.getUTCDate()+'"][data-month="'+(start_date.getUTCMonth()+1)+'"][data-year="'+start_date.getUTCFullYear()+'"]').length&&$calendar_instance.find(".wpbs-date-hover").first().addClass("wpbs-selected-first").find(".wpbs-legend-item-icon").append('<div class="wpbs-legend-icon-select"><svg height="100%" width="100%" viewBox="0 0 200 200" preserveAspectRatio="none"><polygon points="0,200 200,200 200,0" /></svg></div>'),$calendar_instance.find('.wpbs-container .wpbs-date[data-day="'+end_date.getUTCDate()+'"][data-month="'+(end_date.getUTCMonth()+1)+'"][data-year="'+end_date.getUTCFullYear()+'"]').length&&$calendar_instance.find(".wpbs-date-hover").last().addClass("wpbs-selected-last").find(".wpbs-legend-item-icon").append('<div class="wpbs-legend-icon-select"><svg height="100%" width="100%" viewBox="0 0 200 200" preserveAspectRatio="none"><polygon points="0,0 0,200 200,0" /></svg></div>'))})),$("body").on("click","#wpbs-edit-order",(function(e){e.preventDefault();var $container=$(this).parents(".wpbs-main-wrapper");$container.find("form.wpbs-form-container").appendTo($container),$container.find(".wpbs-payment-confirmation").remove(),$container.find('input[name$="-confirmation-loaded"]').remove(),$container.find(".wpbs-container").removeClass("wpbs-disable-selection")})),$("body").on("click",".wpbs-coupon-code-add",(function(e){e.preventDefault();var $button=$(this),$input=$button.siblings("input"),$calendar_instance=$button.parents(".wpbs-main-wrapper");$button.parents(".wpbs-form-field").find(".wpbs-form-field-error").remove(),$form=$calendar_instance.find("form"),$calendar=$calendar_instance.find(".wpbs-container");var data={action:"wpbs_apply_coupon"};data.form=$form.data(),data.calendar=$calendar.data(),data.coupon_code=$input.val(),$.post(wpbs_ajax.ajax_url,data,(function(response){!0===(response=JSON.parse(response)).success&&(wpbs_calculate_price($calendar_instance),$input.prop("readonly",!0),$button.html('<svg aria-hidden="true" focusable="false"role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z" class=""></path></svg>'),$button.removeClass("wpbs-coupon-code-add").addClass("wpbs-coupon-code-remove")),!1===response.success&&$button.parents(".wpbs-form-field").append('<div class="wpbs-form-field-error"><small>'+response.error+"</small></div>")}))})),$("body").on("click",".wpbs-coupon-code-remove",(function(e){e.preventDefault();var $button=$(this),$input=$button.siblings("input"),$calendar_instance=$button.parents(".wpbs-main-wrapper");$input.val("").prop("readonly",!1),$button.addClass("wpbs-coupon-code-add").removeClass("wpbs-coupon-code-remove"),$button.text($button.data("label")),wpbs_calculate_price($calendar_instance)})),$(document).on("submit","#wpbs-final-payment-form",(function(e){e.preventDefault();var data={action:"wpbs_save_final_payment"};data.post_data=$(this).serialize(),$.post(wpbs_ajax.ajax_url,data,(function(response){$(".wpbs-final-payment-confirmation").html(response)}))})),"undefined"!=typeof wpbs_ajax&&wpbs_ajax.wpbs_iti&&$(".wpbs-main-wrapper").each((function(){$container=$(this),wpbs_initialize_intl_tel_input($container)})),$(document).on("wpbs_form_updated",(function(e,$container){if(!wpbs_ajax.wpbs_iti)return!1;wpbs_initialize_intl_tel_input($container)})),$(document).on("blur",".wpbs-form-field-phone input",(function(){wpbs_ajax.wpbs_iti&&($phone_input=$(this),$field=$phone_input.parents(".wpbs-form-field"),$field.removeClass("wpbs-form-field-has-error"),$field.find(".wpbs-form-field-error").remove(),iti=wpbs_intl_tel_input_get_instance($phone_input),$(this).val().trim()&&(iti.isValidNumber()?iti.setNumber(iti.getNumber()):($field.addClass("wpbs-form-field-has-error"),$field.append('<div class="wpbs-form-field-error"><small>'+$phone_input.data("error")+"</small></div>"))))})),($("body").hasClass("elementor-editor-active")||$("#bricks-builder-context-menu").length)&&setInterval((function(){$(".wpbs-container-loaded").each((function(){"1"==$(this).attr("data-just-loaded")&&($(window).trigger("resize"),$(this).attr("data-just-loaded","0"))}))}),250),$(document).on("elementor/popup/show",()=>{$(window).trigger("resize")}),$(window).on("jet-popup/ajax/frontend-init/after",()=>{$(".wpbs-main-wrapper").each((function(){wpbs_initialize_intl_tel_input($(this))})),$(window).trigger("resize")}),setTimeout(wpbs_check_if_calendar_is_visible,250),$("body").hasClass("block-editor-page")&&$("body").hasClass("wp-admin")&&setInterval((function(){$(window).trigger("resize")}),1e3),$(window).on("load",(function(){$(".wpbs-scroll-to-calendar").length&&0!=wpbs_ajax.scroll_animation_offset&&$("html, body").stop().animate({scrollTop:$(".wpbs-scroll-to-calendar").offset().top-wpbs_ajax.scroll_animation_offset})})),$.each(wpbs_conditional_logic,(function(form_id){$(".wpbs-main-wrapper-form-"+form_id).each((function(){var $calendar_instance=$(this);$calendar_instance.on("change keyup",".wpbs-form-"+form_id+" input, .wpbs-form-"+form_id+" select",(function(){wpbs_apply_conditional_logic($calendar_instance)})),wpbs_apply_conditional_logic($calendar_instance)}))})),$(document).on("wpbs_form_updated",(function(e,calendar_wrapper,form_id){wpbs_apply_conditional_logic(calendar_wrapper)})),$(document).on("wpbs_add_booking_modal_opened",(function(e){$calendar_wrapper=$("#wpbs-add-booking .wpbs-main-wrapper"),wpbs_apply_conditional_logic($calendar_wrapper)})),$(document).on("click",".wpbs-number-increment",(function(e){e.preventDefault();var $button=$(this),$input=$button.siblings("input"),current_value=parseFloat($input.val()),min=parseFloat($input.attr("min")),max=parseFloat($input.attr("max")),step=parseFloat($input.attr("step")),decimals=parseInt($input.data("decimals"));$button.hasClass("wpbs-number-increment-minus")?current_value?(new_value=current_value-step,new_value<min?$input.val(min.toFixed(decimals)):$input.val(new_value.toFixed(decimals))):$input.val(min.toFixed(decimals)):$button.hasClass("wpbs-number-increment-plus")&&(current_value?(new_value=current_value+step,new_value>max?$input.val(max.toFixed(decimals)):$input.val(new_value.toFixed(decimals))):(current_value=min+step,$input.val(current_value.toFixed(decimals)))),wpbs_calculate_price($button.parents(".wpbs-main-wrapper"))})),$(document).on("blur",".wpbs-form-field input[type=number]",(function(e){var $input=$(this),current_value=parseFloat($input.val()),min=parseFloat($input.attr("min")),max=parseFloat($input.attr("max")),decimals=parseInt($input.data("decimals"));(current_value-=0)<min&&(current_value=min),current_value>max&&(current_value=max),$input.val(current_value.toFixed(decimals))}))}));